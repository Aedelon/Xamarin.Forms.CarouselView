<?xml version="1.0" encoding="utf-8"?>
<Project 
  ToolsVersion="12.0" 
  DefaultTargets="Build" 
  InitialTargets="C6D4C295-BD1A-4F1F-9E5A-B61496734293"
  xmlns="http://schemas.microsoft.com/developer/msbuild/2003"
>
  <Import 
    Project="$(MSBuildExtensionsPath)\$(MSBuildToolsVersion)\Microsoft.Common.props" 
    Condition="Exists('$(MSBuildExtensionsPath)\$(MSBuildToolsVersion)\Microsoft.Common.props')" 
  />
  <Import Project="$(ExtNodeDir)node.props"/>
  <Import Project="$(ExtMetaDir)meta.props"/>
  <Import Project="$(ExtPartDir)part.props"/>
  <Import Project="$(ExtDir)common.props"/>
  <Import Project="$(ExtNugetDir)nuget.props"/>
  <Import Project="$(ExtXfDir)xf.props"/>

  <!--inject .targets-->
  <PropertyGroup>
    <!--<CustomAfterMicrosoftCommonTargets>$([MSBuild]::GetDirectoryNameOfFileAbove($(ProjDir), .targets))\.targets</CustomAfterMicrosoftCommonTargets>-->
  </PropertyGroup>

  <!--cctor-->
  <Target 
    Name="C6D4C295-BD1A-4F1F-9E5A-B61496734293"
    Condition="'$(HasBuildInfo)'=='true'"
  >
    <ItemGroup>
      <Compile Include="@(BuildInfoFile)" />
    </ItemGroup>
    <PropertyGroup>
      <DefineConstants>$(DefineConstants)HAS_BUILD_INFO;</DefineConstants>
    </PropertyGroup>
  </Target>

  <!--shim-->
  <PropertyGroup>
    <ShimReference>$(MSBuildThisFileDirectory)src\</ShimReference>
    <ShimTarget>NugetRestore</ShimTarget>
    <ShimProperties>SkipNugetImports=true</ShimProperties>
  </PropertyGroup>
  <PropertyGroup Condition="'$(BuildTarget)'=='build' OR '$(BuildTarget)'=='rebuild'">
    <ShimBeforeProject>$(PublishProj)</ShimBeforeProject>
    <ShimAfterProject>$(PublishProj)</ShimAfterProject>
    <ShimAfterTarget>Publish</ShimAfterTarget>
  </PropertyGroup>

</Project>