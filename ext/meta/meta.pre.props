<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="12.0" DefaultTargets="Build" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">

  <PropertyGroup>
    <ExtMetaDir>$(MSBuildThisFileDirectory)</ExtMetaDir>
  </PropertyGroup>

  <PropertyGroup>
    <MetaVerbosity>$(Verbosity)</MetaVerbosity>
  </PropertyGroup>

  <PropertyGroup>
    <Platform Condition="'$(Platform)'==''">all</Platform>
  </PropertyGroup>
  
  <PropertyGroup>
    <MetaPlatform Condition="'$(_MetaPlatform)'!=''">$(_MetaPlatform)</MetaPlatform>
    <ClearRecursiveFrame>$(ClearRecursiveFrame)_MetaPlatform=;</ClearRecursiveFrame>
    <KeepRecursiveFrame>$(KeepRecursiveFrame)_MetaPlatform=$(_MetaPlatform);</KeepRecursiveFrame>
  </PropertyGroup>

  <!--library platform ids-->
  <PropertyGroup>

    <!--abstract platform ids-->
    <LeafPlatformId>leaf</LeafPlatformId>
    <MetaPlatformId>meta</MetaPlatformId>
    <GroupPlatformId>group</GroupPlatformId>
  </PropertyGroup>

  <!--ad-hoc platform group-->
  <PropertyGroup Condition="$(Plat.Contains(';'))">
    <ChildPlatforms>$(Plat)</ChildPlatforms>
    <PlatformType>$(GroupPlatformId)</PlatformType>
  </PropertyGroup>

  <!--ChildPlatform: Property -> Items-->
  <ItemGroup>
    <ChildPlatforms Include="$(ChildPlatforms)"/>
  </ItemGroup>

  <ItemDefinitionGroup>
    <SelfReference>
      <!--prevents VS from creating an artifact in the solution explorer-->
      <InProject>false</InProject>
    </SelfReference>
  </ItemDefinitionGroup>

</Project>